import { auth } from "@/auth";
import Image from "next/image";
import Link from "next/link";

export async function HeaderProfile() {
    const session = await auth();
    console.log(session);
    console.log(session);
    

    if(!session){
        return(
            <Link href={'/login'} className="flex bg-white rounded-full items-center justify-center w-8 h-8 basis-8 shrink-0 grow-0 relative z-1 cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
                    <path fillRule="evenodd" clipRule="evenodd" d="M15 15.083C14.5134 15.091 14.0301 15.0021 13.5782 14.8215C13.1263 14.6408 12.7149 14.372 12.368 14.0308C12.021 13.6895 11.7455 13.2826 11.5574 12.8338C11.3693 12.3849 11.2724 11.9032 11.2724 11.4165C11.2724 10.9298 11.3693 10.4481 11.5574 9.99923C11.7455 9.55039 12.021 9.14348 12.368 8.80222C12.7149 8.46096 13.1263 8.19216 13.5782 8.01151C14.0301 7.83086 14.5134 7.74196 15 7.75C15.9619 7.76589 16.8791 8.15916 17.5537 8.84504C18.2284 9.53091 18.6064 10.4544 18.6064 11.4165C18.6064 12.3786 18.2284 13.3021 17.5537 13.988C16.8791 14.6738 15.9619 15.0671 15 15.083ZM10.333 11.417C10.333 10.1792 10.8247 8.99216 11.6999 8.11693C12.5752 7.2417 13.7622 6.75 15 6.75C16.2378 6.75 17.4248 7.2417 18.3001 8.11693C19.1753 8.99216 19.667 10.1792 19.667 11.417C19.667 12.6548 19.1753 13.8418 18.3001 14.7171C17.4248 15.5923 16.2378 16.084 15 16.084C13.7622 16.084 12.5752 15.5923 11.6999 14.7171C10.8247 13.8418 10.333 12.6548 10.333 11.417ZM13.833 17.917C12.1534 17.917 10.5426 18.5842 9.35489 19.7719C8.16722 20.9596 7.5 22.5704 7.5 24.25H8.5C8.5 22.8356 9.06187 21.4791 10.062 20.479C11.0621 19.4789 12.4186 18.917 13.833 18.917H16.167C17.5814 18.917 18.9379 19.4789 19.938 20.479C20.9381 21.4791 21.5 22.8356 21.5 24.25H22.5C22.5 23.4183 22.3362 22.5948 22.0179 21.8265C21.6997 21.0581 21.2332 20.36 20.6451 19.7719C20.057 19.1838 19.3589 18.7173 18.5905 18.3991C17.8222 18.0808 16.9987 17.917 16.167 17.917H13.833Z" fill="#292933"/>
                </svg>
            </Link>
        )
    }
    
    return(
        <Link href={'/profile'} className="flex gap-x-2 items-center cursor-pointer relative z-1 text-white hover:text-white/80">
            <span className="text-base transition-colors hidden lg:block">{session?.user?.name}</span>
            <div className="w-8 h-8 basis-8 shrink-0 grow-0 bg-white rounded-full items-center justify-center overflow-hidden">
                {session?.user?.image ? 
                    <Image src={session.user.image || ''} width={32} height={32} alt="Avatar" /> 
                    :  
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
                        <path fillRule="evenodd" clipRule="evenodd" d="M15 15.083C14.5134 15.091 14.0301 15.0021 13.5782 14.8215C13.1263 14.6408 12.7149 14.372 12.368 14.0308C12.021 13.6895 11.7455 13.2826 11.5574 12.8338C11.3693 12.3849 11.2724 11.9032 11.2724 11.4165C11.2724 10.9298 11.3693 10.4481 11.5574 9.99923C11.7455 9.55039 12.021 9.14348 12.368 8.80222C12.7149 8.46096 13.1263 8.19216 13.5782 8.01151C14.0301 7.83086 14.5134 7.74196 15 7.75C15.9619 7.76589 16.8791 8.15916 17.5537 8.84504C18.2284 9.53091 18.6064 10.4544 18.6064 11.4165C18.6064 12.3786 18.2284 13.3021 17.5537 13.988C16.8791 14.6738 15.9619 15.0671 15 15.083ZM10.333 11.417C10.333 10.1792 10.8247 8.99216 11.6999 8.11693C12.5752 7.2417 13.7622 6.75 15 6.75C16.2378 6.75 17.4248 7.2417 18.3001 8.11693C19.1753 8.99216 19.667 10.1792 19.667 11.417C19.667 12.6548 19.1753 13.8418 18.3001 14.7171C17.4248 15.5923 16.2378 16.084 15 16.084C13.7622 16.084 12.5752 15.5923 11.6999 14.7171C10.8247 13.8418 10.333 12.6548 10.333 11.417ZM13.833 17.917C12.1534 17.917 10.5426 18.5842 9.35489 19.7719C8.16722 20.9596 7.5 22.5704 7.5 24.25H8.5C8.5 22.8356 9.06187 21.4791 10.062 20.479C11.0621 19.4789 12.4186 18.917 13.833 18.917H16.167C17.5814 18.917 18.9379 19.4789 19.938 20.479C20.9381 21.4791 21.5 22.8356 21.5 24.25H22.5C22.5 23.4183 22.3362 22.5948 22.0179 21.8265C21.6997 21.0581 21.2332 20.36 20.6451 19.7719C20.057 19.1838 19.3589 18.7173 18.5905 18.3991C17.8222 18.0808 16.9987 17.917 16.167 17.917H13.833Z" fill="#292933"/>
                    </svg>
                }
                
            </div>
        </Link>
    )
}